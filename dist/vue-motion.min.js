/**
 * vue-motion v0.2.3
 * (c) 2018 Eduardo San Martin Morote <posva13@gmail.com>
 * @license MIT
 */

!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(e.VueMotion={})}(this,function(e){"use strict";var i=[0,0];function t(e,t,n,a,r,s,u){var l=n+(-r*(t-a)+-s*n)*e,o=t+l*e;return Math.abs(l)<u&&Math.abs(o-a)<u?(i[0]=a,i[1]=0,i):(i[0]=o,i[1]=l,i)}var n={noWobble:{stiffness:170,damping:26,precision:.01},gentle:{stiffness:120,damping:14,precision:.01},wobbly:{stiffness:180,damping:12,precision:.01},stiff:{stiffness:210,damping:20,precision:.01}},a="undefined"!=typeof window?window.requestAnimationFrame.bind(window):function(e){},r="undefined"!=typeof performance?performance.now.bind(performance):Date.now.bind(Date),s=Array.isArray.bind(Array),u=function(e){return null!==e&&"object"==typeof e},l=1e3/60,o={data:function(){return{currentValues:null,currentVelocities:null}},props:{value:Number,values:[Object,Array],tag:{type:String,default:"span"},spring:{type:[Object,String],default:"noWobble"}},computed:{springConfig:function(){return"string"==typeof this.spring?n[this.spring]:this.spring},realValues:function(){return null!=this.value?{value:this.value}:this.values}},render:function(e){return e(this.tag,[this.$scopedSlots.default(this.currentValues)])},watch:{realValues:function(e,i){i===e||this.wasAnimating||(this.prevTime=r(),this.accumulatedTime=0,this.animate())}},created:function(){var e=this.defineInitialValues(this.realValues,null);this.currentValues=e.values,this.currentVelocities=e.velocities},mounted:function(){this.prevTime=r(),this.accumulatedTime=0;var e=this.defineInitialValues(this.currentValues,this.currentVelocities);this.idealValues=e.values,this.idealVelocities=e.velocities,this.animate()},methods:{defineInitialValues:function(e,i){var t={},n={};return this.defineValues(e,i,t,n),{values:t,velocities:n}},defineValues:function(e,i,t,n){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s(e[a])||u(e[a])?(t[a]={},n[a]={},this.defineValues(e[a],i&&i[a],t[a],n[a])):(t[a]=e[a],n[a]=i?i[a]:0))},animate:function(){var e=this;this.animationId=a(function(){if(function e(i,t,n){for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a))if(s(t[a])||u(t[a])){if(!e(i[a],t[a],n[a]))return!1}else{if(0!==n[a])return!1;if(i[a]!==t[a])return!1}return!0}(e.currentValues,e.realValues,e.currentVelocities))return e.wasAnimating&&e.$emit("motion-end"),e.animationId=null,void(e.wasAnimating=!1);e.wasAnimating||e.$emit("motion-start"),e.wasAnimating=!0;var i=r(),t=i-e.prevTime;if(e.prevTime=i,e.accumulatedTime+=t,e.accumulatedTime>10*l&&(e.accumulatedTime=0),0===e.accumulatedTime)return e.animationID=null,e.$emit("motion-restart"),void e.animate();var n=(e.accumulatedTime-Math.floor(e.accumulatedTime/l)*l)/l,a=Math.floor(e.accumulatedTime/l),o=e.springConfig;e.animateValues({framesToCatchUp:a,currentFrameCompletion:n,springConfig:o,realValues:e.realValues,currentValues:e.currentValues,currentVelocities:e.currentVelocities,idealValues:e.idealValues,idealVelocities:e.idealVelocities}),e.animationID=null,e.accumulatedTime-=a*l,e.animate()})},animateValues:function(e){var i=this,n=e.framesToCatchUp,a=e.currentFrameCompletion,r=e.springConfig,o=e.realValues,c=e.currentValues,f=e.currentVelocities,d=e.idealValues,m=e.idealVelocities;for(var p in o)if(Object.prototype.hasOwnProperty.call(o,p))if(s(o[p])||u(o[p])){if(!d[p]){var V=i.defineInitialValues(i.realValues[p],null),h=i.defineInitialValues(i.realValues[p],null);i.$set(d,p,V.values),i.$set(m,p,V.velocities),i.$set(c,p,h.values),i.$set(f,p,h.velocities)}i.animateValues({framesToCatchUp:n,currentFrameCompletion:a,springConfig:r,realValues:o[p],currentValues:c[p],currentVelocities:f[p],idealValues:d[p],idealVelocities:m[p]})}else{for(var v=d[p],g=m[p],w=o[p],y=0;y<n;y++){var b;v=(b=t(l/1e3,v,g,w,r.stiffness,r.damping,r.precision))[0],g=b[1]}var T=t(l/1e3,v,g,w,r.stiffness,r.damping,r.precision),C=T[0],A=T[1];c[p]=v+(C-v)*a,f[p]=g+(A-g)*a,d[p]=v,m[p]=g}}}};function c(e){e.component("Motion",o)}"undefined"!=typeof window&&window.Vue&&window.Vue.use(c),c.presets=n;e.default=c,e.Motion=o,e.version="0.2.3",e.presets=n,Object.defineProperty(e,"__esModule",{value:!0})});